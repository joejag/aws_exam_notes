## S3 (Simple Storage Service)

- Object based. Max filesize of 5Tb. Universal namespace (within a partition, gov and china ones exist too). URLs has region unless in Virginia. https://joe.s3.amazonaws.com
- S3 Object has: key (name), value (bytes), versionId, metadata, sub-resources (ACL, Torrent)
- Data consistency: PUTs on new objects are immediately available. Eventual for overwrites and deletes
- S3 Guarantees: 99.99% uptime, 99.9% SLA. 11 9s durability
- S3 featuers: has tiered storage, lifecycle management (move tiers), versioning, encyption, MFA delete, secure via ACL and policies
- Storage classes (first byte latency, availability, cost are the levers):
  - S3 Standard: 99.99% uptime, 11 9s durability. Multiple AZs (can lose two AZs)
  - S3 - IA: lower storage cost, but adds retrieval costs (once a month data)
  - S3 One Zone - IA: really low cost, can sustain loss
  - S3 Intelligent Tiering: Machine learning to auto-move objects
  - S3 Glacier: super cheap, stuff you need for 7 years. Retrival: mins or hours by choice
  - S3 Glacier deep archive: cheapest, 12 hour retrieval
- Billed: Storage, requests, storage management pricing (tiers), data transfer, transfer acceleratin (Cloudfront, good for uploads), cross-region replication (HA, disaster recovery)
- Max 100 buckets per account. No limit on objects in the bucket. Don't make buckets from code, use infra as code
- Don't use it for block storage (databases, OSes). HTTP 200 on succesful requests
- Older service called "RRS" which is now IA
- Read the S3 FAQs before the exam

## S3 - creating a bucket

- Historically folks were accidenataly making their buckets public and shouting at Amazon
- Storage class can be done at an object level
- Restricting Access:
  - Bucket Policy - whole bucket
  - Object Policy - individual files
  - IAM Polices for users / groups

## S3 - pricing tiers

- Intelligent Tiering incurs a monitoring cost per 1000 objects
- Intelligent moves between Standard and IA (use this), cheaper for one zone.
- Use S3 Intelligent Tiering unless you have millions of objects
- If you don't care about redundency use S3 - One zone - IA
- If you don't care about access time use Glacier

## S3 - Security and Encryption

- buckets an private by default. Can be configured to create access logs in another account's bucket
- Two types of encryption:
  - In Transit (TLS)
  - At rest (if someone steals the hard disk they could get the file)
    - server side (AWS do it):
      - S3 Managed Keys (SSE-S3 - all AWS)
      - AWS Key Managed Service (SSE-KMS - AWS and you)
      - Server side with customer provided (SSE-C - you give AWS keys to use)
    - client side (you do it)
